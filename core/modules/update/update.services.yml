services:
  access_check.update.manager_access:
    class: Drupal\update\Access\UpdateManagerAccessCheck
    arguments: ['@settings']
    tags:
      - { name: access_check, applies_to: _access_update_manager }
  update.manager:
    class: Drupal\update\UpdateManager
    arguments: ['@config.factory', '@module_handler', '@update.processor', '@string_translation', '@keyvalue.expirable', '@theme_handler', '@extension.list.module']
  update.processor:
    class: Drupal\update\UpdateProcessor
    arguments: ['@config.factory', '@queue', '@update.fetcher', '@state', '@private_key', '@keyvalue', '@keyvalue.expirable']
  update.fetcher:
    class: Drupal\update\UpdateFetcher
    arguments: ['@config.factory', '@http_client']
  update.root:
    class: SplString
    factory: ['@update.root.factory', 'get']
    tags:
      - { name: parameter_service }
  update.root.factory:
    class: Drupal\update\UpdateRootFactory
    arguments: ['@kernel', '@request_stack']
    public: false
  logger.channel.update:
    parent: logger.channel_base
    arguments: ['update']
  update.sa_fetcher:
    class: Drupal\update\SecurityAdvisories\SecurityAdvisoriesFetcher
    arguments:
      - '@config.factory'
      - '@keyvalue.expirable'
      - '@datetime.time'
      - '@http_client'
      - '@extension.list.module'
      - '@extension.list.theme'
      - '@extension.list.profile'
  update.sa_notify:
    class: Drupal\update\SecurityAdvisories\EmailNotify
    arguments:
      - '@plugin.manager.mail'
      - '@update.sa_fetcher'
      - '@config.factory'
      - '@language_manager'
      - '@state'
      - '@datetime.time'
      - '@entity_type.manager'
      - '@string_translation'
      - '@logger.channel.update'
